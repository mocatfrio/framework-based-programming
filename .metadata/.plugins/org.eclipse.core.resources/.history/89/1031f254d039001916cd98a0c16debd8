package com.example.json_to_pojo;

import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStreamReader;
import java.io.Reader;
import java.net.HttpURLConnection;
import java.net.URL;
import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class BookResponse {
	public static void main(String[] args) throws Exception {
		String isbn;
		
		InputStreamReader isbnInput = new InputStreamReader(System.in);
		BufferedReader isbnReader = new BufferedReader(isbnInput);
		
		System.out.println("### Pencarian buku berdasarkan ISBN ###");
		System.out.print("Masukkan ISBN: ");
		isbn = isbnReader.readLine();
        
        URL url = new URL("https://www.booknomads.com/api/v0/isbn/" + isbn);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setRequestMethod("GET");
        connection.connect();
        
        try(BufferedReader jsonReader  = new BufferedReader(new InputStreamReader(connection.getInputStream()))){
	        Gson gson = new GsonBuilder().create();
	        Book book = gson.fromJson(jsonReader, Book.class);
	        System.out.println(book);
        }
        catch(Exception ex) {
        	System.out.println("Data tidak ditemukan");
        }
    }
}

